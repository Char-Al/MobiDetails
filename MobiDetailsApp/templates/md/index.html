{% from 'macros.html' import danger, info %}
{% extends "base.html" %}
{% block title %}Homepage{% endblock %}
{% block content %}
	<div class="w3-container w3-center w3-padding-32">
		<img class="w3-image" alt="MobiDetails" height="200" src="{{ url_for('static', filename='img/MobiDetails1.png') }}" width="700" /><br />
		<p class="w3-xlarge">Online DNA Variant Interpretation</p>
		<p class="w3-large">
	{% if g.user['username'] %}
		{{ g.user['username'] }}
	{% else %}
		Public user
	{% endif %}
	, welcome to MobiDetails: You can create
	{% if g.user['username'] %}
	, annotate
	{% endif %}
	and investigate variants in
		</p>
		<div>
			<span class="w3-button w3-badge w3-jumbo w3-blue w3-hover-light-blue" onclick="window.location='{{ url_for('md.genes') }}'" title="see all genes">{{ nb_genes }}</span><span> genes and </span><span class="w3-button w3-badge w3-jumbo w3-blue w3-hover-light-blue" onclick="window.location='{{ url_for('md.genes') }}'" title="see all genes">{{ nb_isoforms }}</span><span> isoforms </span>
		</div>
	</div>
	<div align="center">		
		<form method="post" action="{{ url_for('md.search_engine') }}" enctype="application/x-www-form-urlencoded" id="main" onsubmit="encode_params('main_engine');">
			<div class="w3-margin-16 w3-container" style="width:50%">
				<input class="w3-input w3-light-grey w3-animate-input" id="main_engine" maxlength="40" name="search" placeholder=" Ask MobiDetails:" size="50" style="width:30%" type="text" />
				<br /><br /><input class="w3-button w3-blue" type="submit" value="Submit" />
			</div>
		</form>
		<!--autocomplete-->
		<script type="text/javascript">
			$('#main_engine').autocomplete({
				source: function(request, response){									
					$.ajax({
						url: '{{ url_for('ajax.autocomplete') }}',
						dataType: 'json',
						method: 'POST',
						data: {
							query_engine: encodeURIComponent(request.term)
						},
						success: response
					});
				},
				minLength: 2,
			});
		</script>
	</div>
	<br />
	<div class="w3-margin w3-panel w3-sand w3-leftbar w3-display-container">
		<p>MobiDetails is a web app to help interprete genetic DNA variations.<br />MobiDetails relies on genes to create variants (see <a href='{{ url_for('md.about') }}'>about page</a>). When a variant is created, it then aggregates information from multiple sources (see <a href='{{ url_for('md.about') }}'>about page</a>) including population frequencies, predictors, etc.<br />If your gene is not in the <a href='{{ url_for('md.genes') }}'>list</a>, you can request it from &#100;&#097;&#118;&#105;&#100;&#046;&#098;&#097;&#117;&#120;&#064;&#105;&#110;&#115;&#101;&#114;&#109;&#046;&#102;&#114;.<br /> MobiDetails is developed at Montpellier University Hospital (Laboratory of Molecular Genetics) and is <strong>free for academic use</strong>.<br />You can explore the swagger <a href='/MDAPI/'>API</a> for programmatic access and learn <a href="https://github.com/beboche/MobiDetails/wiki/Batch-variants-creation">how</a> to use the API with <a href="https://github.com/beboche/MDUtils">MDUtils</a> scripts to remotely create your lists of variants.<br />You might also want to check our private life <a href='{{ url_for('md.about', _anchor='private_life') }}'>statement</a>.</p>
	</div>
	{{ info('Have a look at the <a href="https://mobidetails.iurc.montp.inserm.fr/posters/md_poster_assises_2020.pdf" target="_blank">MobiDetails poster</a> presented at the French conference <a href="http://assises-genetique.org/fr/" target="_blank">"Assises de génétique 2020"</a>!</a>') }}
	<!--
	##{{ info("MobiDetails is a web app aiming at helping to interprete genetics DNA variations.<br/>MobiDetails relies on genes to create variants (see <a href='{{ url_for('md.about') }}'>about page</a>). When a variant is created, it then agregates information from several sources (see <a href='{{ url_for('md.about') }}'>about page</a>) including population frequencies, predictors, etc.<br/>If your gene is not in the <a href='{{ url_for('md.genes') }}'>list</a>, you can request it at &#100;&#097;&#118;&#105;&#100;&#046;&#098;&#097;&#117;&#120;&#064;&#105;&#110;&#115;&#101;&#114;&#109;&#046;&#102;&#114;.<br/> MobiDetails is developped in Montpellier University Hospital (Laboratory of Molecular Genetics) and is <strong>free fo academic use</strong>.") }}-->
	<!--{{ danger("WARNING: Please beware that variant creation is impossible for some genes for various reasons. We are actively working on clarifying the situation before adding new genes. We are sorry for any inconvenience that you might encounter.") }}-->
	{{ danger("WARNING: MobiDetails is in current active development. This is a &beta; version.","If you experience any trouble or have any great idea to improve the software, please e-mail me at &#100;&#097;&#118;&#105;&#100;&#046;&#098;&#097;&#117;&#120;&#064;&#105;&#110;&#115;&#101;&#114;&#109;&#046;&#102;&#114;") }}
<!--	<div class="w3-margin w3-panel w3-sand w3-leftbar w3-display-container">
		<span class="w3-button w3-ripple w3-display-topright w3-large" onclick="this.parentElement.style.display='none'">X</span>
		<p><strong>NEWS:</strong>
			<ul>
				<li>2019-09-26: Release of the first complete &alpha; version (github commit 0954177)</li>
				<li>2019-09-26: MobiDetails runs using <a href = 'https://flask.palletsprojects.com/en/1.1.x/', target = '_blank'>Flask</a>, <a href = 'https://jinja.palletsprojects.com/en/2.10.x/', target = '_blank'>Jinja</a> <a href = 'https://www.python.org/', target = '_blank'>python</a> and <a href = 'https://www.postgresql.org/', target = '_blank'>postgreSQL</a></li>
			</ul>
		</p>
	</div>-->
	{{ info("<strong>Search engine usage:</strong><ul><li>by exact HGVS c. or p. (allowing variations), e.g. 'p.Arg34Ter', 'p.Arg34*', 'c.100C>T', 'c.100c>t'...</li><li>by exact HGVS genomic nomenclature (hg19 or hg38), e.g. 'chr1:g.216595579G>A' or 'NC_000001.10:g.216595579G>A'<li>a partial number match on HGVS c. or p. variant names, e.g. '229' would return all variants with 229 in c. name or p. name</li><li>you can also use a decorator '%' with numbers to look for exact matches, e.g. '%2299' would return variants that contain 2299 in c. name or p. name, but not 22991, for example</li><li>gene symbol, e.g. 'USH2A'</li><li>RefSeq NM accession number, e.g. 'NM_206932'</li></ul>") }}
	<br /><br />
	<div class="w3-row w3-padding-64 w3-margin">
		<div class="w3-third w3-center">
			<a href="http://www.chu-montpellier.fr/en/patients-and-visitors/" target="_blank" title="Montpellier University Hospital">
				<img class="w3-image" alt="CHU Montpellier" width="280" src="{{ url_for('static', filename='img/CHU_300_transparent.png') }}"/>
			</a>
		</div>
		<div class="w3-third w3-center">
			<a href="https://neuro-2.iurc.montp.inserm.fr/mobidic/" target="_blank" title="MOntpellier BIoinformatique pour le DIagnotic Clinique">
				<img class="w3-image" alt="CHU Montpellier" width="350" src="{{ url_for('static', filename='img/logo-mobidic.svg') }}"/>
			</a>
		</div>
		<div class="w3-third w3-center">
			<a href="https://www.umontpellier.fr/university-of-montpellier" target="_blank" title="Montpellier University">
				<img class="w3-image" alt="CHU Montpellier" width="200" src="{{ url_for('static', filename='img/LOGO_original_RVB_petit.png') }}"/>
			</a>
		</div>
	</div>
	<br /><br />
	<!--    <h1>Welcome to MobiDetails!!</h1>
		<p>
			MD currently has {{ nb_genes }} gene in database and {{ nb_vars }} variants.
		</p>-->
{% endblock %}