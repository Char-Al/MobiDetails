{% from 'macros.html' import danger %}
<!DOCTYPE html>
<html lang="en">
	<head>
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<meta name="keywords" content="DNA variant interpretation, missense prediction, splicing prediction, MobiDetails, Mobidic bioinformatics, DNA mutation, variant frequency, variant pathogenicity" />
		<meta name="description" content="Online DNA variant interpretation" />
		<link rel="search" type="application/opensearchdescription+xml" title="search MobiDetails" href="{{ url_for('static', filename='mdbrowserengine.xml') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='styles/w3.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='styles/md.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='styles/font-awesome.min.css') }}">
		<link rel="stylesheet" href="{{ url_for('static', filename='styles/jquery-ui.min.css') }}">
		<link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">
		<link rel="icon" href="{{ url_for('static', filename='img/favicon.ico') }}" type="image/x-icon">
		<script src="{{ url_for('static', filename='javascript/jquery-3.4.1.min.js') }}" type="text/javascript"></script>
		<script src="{{ url_for('static', filename='javascript/md.js') }}" type="text/javascript"></script>
		<script src="{{ url_for('static', filename='javascript/jquery-ui.min.js') }}" type="text/javascript"></script>
		{% block more_head %}{% endblock %}
		<title>
		{% block title %}
			{% if variant_features is defined %}
				{{ variant_features.gene_name[0] }}:{{ variant_features.gene_name[1] }}.{{ variant_features.nm_version }}:c.{{ variant_features.c_name }}
			{% endif %}		
		{% endblock %} - MobiDetails</title>
	</head>
	<body>
		<div class="w3-medium" id="header">
			<div class="w3-top" style="z-index:1112">
				<!--scrollbar-->
				<div class="w3-white" id="scroll">
					<div class="w3-blue" id="scroll-bar" style="height:4px;width:0%">
					</div>
				</div>
				<!--navbar-->
				<div class="w3-bar w3-card-2 w3-black" id="mdNavBar">
					<!--home, about-->
					<div class="w3-dropdown-hover">
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge w3-black" onclick="window.location='{{ url_for('md.index') }}';" title="MobiDetails homepage">
							<i class="fa fa-home w3-xxlarge"></i>
						</span>
						<!--<div class="w3-dropdown-content w3-bar-block w3-card-4">
							<span class="w3-bar-item w3-button w3-ripple w3-large" onclick="window.location='{{ url_for('md.about') }}';">About</span>
						</div>-->
					</div>					
					<!--about-->
					<div class="w3-dropdown-hover">
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge" onclick="window.location='{{ url_for('md.about') }}';" title="About Mobidetails">
							<i class="fa fa-sticky-note-o w3-xxlarge"></i>
						</span>
					</div>
					<!--all genes-->
					<div class="w3-dropdown-hover">
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge" onclick="window.location='{{ url_for('md.genes') }}';" title="Show all genes">
							<i class="fa fa-ioxhost w3-xxlarge"></i>
						</span>
					</div>
					{# for variant page #}
					{% if variant_features is defined %}
						<!--left menu-->
						<div>
							<span class="w3-bar-item w3-button w3-ripple w3-xlarge" id="openNav" onclick="w3_open()" style="visibility:hidden" title="Open the menu of useful external links">
								<i class="fa fa-bars w3-xxlarge"></i>
							</span>
						</div>
						<!--export tables as pdf-->
						<div>
							<span class="w3-bar-item w3-button w3-ripple w3-xlarge" id="ExportPdf" title="Export the tables as pdf file">
								<i class="fa fa-file-pdf-o w3-xxlarge"></i>
							</span>
						</div>
						<!--page title-->
						<div>
							<!--<span class="w3-bar-item w3-button w3-ripple w3-xlarge" title="click to get somewhere" onclick="document.getElementById('gene_modal').style.display='block';"><em>{{ variant_features.gene_name[0] }}:{{ variant_features.gene_name[1] }}.{{ variant_features.nm_version }}:c.{{ variant_features.c_name }}</em></span>-->
							<span class="w3-bar-item w3-xlarge" id="variant_name"><em>{{ variant_features.gene_name[0] }}</em>:{{ variant_features.gene_name[1] }}.{{ variant_features.nm_version }}:c.{{ var_cname }}</span>
						</div>
						<div>
							{% if g.user and favourite == True %}
								<span class="w3-bar-item w3-ripple w3-xlarge star_fav" id="favour_star" style="display:block;" title="This variant is marked as one of your favourites.">
							{% else %}
								<span class="w3-bar-item w3-ripple w3-xlarge star_fav" id="favour_star" style="display:none;" title="This variant is marked as one of your favourites.">
							{% endif %}
								<i class="fa fa-star-o w3-xxlarge"></i>
							</span>
						</div>
						{#{% else %}#}
							<!--<span class="w3-bar-item w3-xlarge" id="app_desc">Online DNA Variants Interpretation</span>-->
					{% endif %}					
					<!--auth-->
					<div>
					{% if g.user %}
						<!--profile-->
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge w3-right" id="logout" onclick="window.location='{{ url_for('auth.logout') }}';" title="Log out">
							<i class="fa fa-user-times w3-xxlarge"></i>
						</span>
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge w3-right" id="myprofile" onclick="window.location='{{ url_for('auth.profile', mobiuser_id=0) }}';" title="Visit your page">
							<i class="fa fa-id-card-o w3-xxlarge"></i>
						</span>						
						<span class="w3-bar-item w3-xlarge w3-right" id="login_name">Logged in as {{ g.user.username }}</span>
					{% else %}
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge w3-right" onclick="window.location='{{ url_for('auth.register') }}';" title="Register">
							<i class="fa fa fa-user-plus w3-xxlarge"></i>
						</span>
						<span class="w3-bar-item w3-button w3-ripple w3-xlarge w3-right" onclick="window.location='{{ url_for('auth.login') }}';" title="Log in">
							<i class="fa fa fa-user w3-xxlarge"></i>
						</span>
					{% endif %}
					</div>
				</div>
			</div>
		</div>
		<br/><br/><br/>
		<header align="center">
			{% block header %}{% endblock %}
		</header>
		{% for message in get_flashed_messages() %}
			{% autoescape false %}
				<div class="w3-margin w3-panel w3-pale-red w3-leftbar w3-display-container">
					<span class="w3-button w3-ripple w3-display-topright w3-large" onclick="this.parentElement.style.display='none'">X</span>
					<p><strong>{{ message }}</strong></p>
				</div>
			{% endautoescape %}
		{% endfor %}
		<br />
		{#{{ danger("IMPORTANT NOTICE:<br /> MobiDetails is currently facing a technical issue which can slow down your interpretation or even prevent it. <br />Apologies for any inconvenience. We are working on it. Some complete service interruptions may occur in the coming days.") }}#}
		<div id="content">{% block content %}{% endblock %}</div>
		<!--footer-->
		<div id="footer">
			<div class="w3-bottom" style="z-index:1112">
				<div class="w3-bar w3-card-2 w3-black" id="mdNavBarBot">
					<!--search engine-->					
					<form method="post" action="{{ url_for('md.search_engine') }}" enctype="application/x-www-form-urlencoded" id="search_form" onsubmit="encode_params('engine');">
						<div class="w3-row-padding">
							<div class="w3-half w3-right-align">
								<input autofocus="autofocus" class="w3-input w3-border w3-large w3-mobile" id="engine" maxlength="40" name="search" placeholder=" Ask MobiDetails:" size="30" style="width:200px;display:inline;" type="text"/>
							</div>
							<div class="w3-quarter">
								<input class="w3-button w3-white w3-large w3-border w3-mobile" id="submit_a" type="submit" value="Submit" />
							</div>
						</div>
					</form>
					<!--autocomplete-->
					<script type="text/javascript">
						$('#engine').autocomplete({
							source: function(request, response){									
								$.ajax({
									url: '{{ url_for('ajax.autocomplete') }}',
									dataType: 'json',
									method: 'POST',
									data: {
										query_engine: encodeURIComponent(request.term)
									},
									success: response
								});
							},
							minLength: 2,
							position: {
								my: 'bottom',
								at: 'top'
							}
						});
						//$('#search_form').submit(function(event) {
						//	var inter = $('#engine').val();
						//	$('#engine').val(encodeURIComponent(inter));
						//	return true;
						//});
					</script>
				</div>
			</div>
		</div>
	</body>
</html>